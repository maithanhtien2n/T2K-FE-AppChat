import{_ as W,T as X,K as Y,u as Z,S as ee,L as se,k as v,q as te,c as g,d as l,f as _,O as z,e,g as n,C as f,P as b,Q as A,N as D,V as oe,o as a,G as le,H as ne,I as ae}from"./index-10c35328.js";import{u as ie}from"./index-ded35b3c.js";const ce="/assets/image-product-default-eb8ce0bc.svg";const x=d=>(ne("data-v-5eabd472"),d=d(),ae(),d),re={class:"flex flex-column gap-3 align-items-end"},ue={style:{"padding-top":"4rem"},class:"relative h-full"},me={style:{"border-bottom":"1px solid #f1f1f1"},class:"absolute z-5 top-0 right-0 left-0 w-full h-4rem bg-white flex justify-content-between align-items-center px-3"},de={class:"flex gap-3 align-items-center"},pe=x(()=>e("div",{class:"flex align-items-center gap-1"},[e("span",{class:"font-bold text-800"},"Cài đặt"),e("i",{class:"pi pi-spin pi-cog"})],-1)),ge={style:{"overflow-y":"auto"},class:"w-full h-full",ref:"scrollContainer"},_e={class:"w-full chat-container flex flex-column gap-3 align-items-center"},fe={class:"flex flex-column gap-3 align-items-center text-900"},he={class:"relative w-7rem h-7rem border-circle border-1 text-200 overflow-hidden"},ve=["src"],be=["src"],xe={class:"absolute top-0 left-0 right-0 bottom-0 bg-black-alpha-40 flex justify-content-center align-items-center"},ye=x(()=>e("i",{class:"pi pi-camera text-2xl"},null,-1)),we={style:{"font-size":"1.2rem"},class:"font-bold flex gap-2 align-items-center"},ke={key:0,style:{"font-size":"1.3rem"}},Ce={key:1,style:{"font-size":"1.3rem"}},Se={class:"flex align-items-center gap-1"},Ie={class:"flex flex-column gap-2 py-3"},Re={class:"w-full flex flex-wrap gap-2"},Me={class:"relative w-full h-full on-click border-1 text-100"},Te=["src"],Ge={class:"absolute top-0 left-0 right-0 bottom-0 overflow-hidden opacity-0"},Ne=["src","onClick"],Ue=x(()=>e("img",{class:"w-full h-full object-fit-cover border-1 text-200",src:ce,alt:"Lỗi ảnh"},null,-1)),je=[Ue],ze={__name:"SettingMessage",setup(d){const L=X(),V=Y(),y=Z(),{onActionGetListRoom:B}=ee(),{onGetterGroupMessage:i,onActionGetGroupMessage:O,onActionUpdateRoom:E}=se(),r=ie("id","",{transform:String}),h=v(!1),p=v(null),u=v(""),w=()=>{var o;V.name==="SettingMessage"&&O({account_id:(o=D.value)==null?void 0:o.account_id,room_id:r.value}).then(t=>{t.success||y.replace({name:"NotFound"})})},F=o=>{let t=[];for(let c=0;c<12-o;c++)t.push(c);return t},H=()=>{oe(r.value),L.success("Đã sao chép id phòng")},$=o=>{const t=new FileReader;t.readAsDataURL(o.target.files[0]),t.onload=c=>{p.value={name:o.target.files[0].name,base64:c.target.result}}},q=o=>{u.value=o,h.value=!0},K=async()=>{(await E({room_id:r.value,room_name:u.value,room_image:p.value})).success&&(w(),B(D.value.account_id))};return te(()=>{var o,t;(!((o=i.value)!=null&&o._id)||((t=i.value)==null?void 0:t._id)!==r.value)&&w()}),(o,t)=>{var k,C,S,I,R,M,T,G,N,U;const c=g("InputText"),P=g("Dialog"),Q=g("Button"),J=g("Image");return a(),l(b,null,[_(P,{visible:h.value,"onUpdate:visible":t[1]||(t[1]=s=>h.value=s),modal:"",header:"Chỉnh sửa tên nhóm",class:"w-30rem"},{default:z(()=>[e("div",re,[_(c,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),placeholder:"Nhập tên nhóm",class:"w-full"},null,8,["modelValue"])])]),_:1},8,["visible"]),e("div",ue,[e("div",me,[e("div",de,[e("i",{class:"icon-back pi pi-arrow-left on-click font-bold",onClick:t[2]||(t[2]=s=>n(y).push({name:"Message",params:{id:n(r)}}))}),pe]),_(Q,{label:"Lưu",outlined:"",onClick:K})]),e("div",ge,[e("div",_e,[e("div",fe,[e("div",he,[(k=p.value)!=null&&k.base64?(a(),l("img",{key:0,class:"w-full h-full object-fit-cover",src:((C=p.value)==null?void 0:C.base64)||"/images/icon-room.png",onerror:"this.onerror=null; this.src='/images/icon-room.png';"},null,8,ve)):(a(),l("img",{key:1,class:"w-full h-full object-fit-cover",src:((S=n(i))==null?void 0:S.room_image)||"/images/icon-room.png",onerror:"this.onerror=null; this.src='/images/icon-room.png';"},null,8,be)),e("div",xe,[e("input",{type:"file",class:"absolute top-0 left-0 right-0 bottom-0 opacity-0 on-click",accept:"image/*",onChange:$},null,32),ye])]),e("span",we,[u.value?(a(),l("span",ke,f(u.value),1)):(a(),l("span",Ce,f((I=n(i))==null?void 0:I.room_name),1)),e("i",{style:{"font-size":"0.9rem"},class:"pi pi-pencil on-click",onClick:t[3]||(t[3]=s=>{var m;return q((m=n(i))==null?void 0:m.room_name)})})]),e("div",Se,[e("span",null,"Id phòng: "+f(n(r)),1),e("i",{class:"pi pi-copy on-click",onClick:H})]),e("span",null,"Số lượng thành viên: "+f((M=(R=n(i))==null?void 0:R.members)==null?void 0:M.length),1)]),e("div",Ie,[e("div",Re,[(a(!0),l(b,null,A((G=(T=n(i))==null?void 0:T.messages)==null?void 0:G.filter(s=>s.image),(s,m)=>(a(),l("div",{key:m,style:{"min-width":"7rem"},class:"flex-1 h-7rem"},[e("div",Me,[e("img",{class:"w-full h-full object-fit-cover",src:s==null?void 0:s.image,onerror:"this.onerror=null; this.src='../../../public/images/icon-image-error.png';"},null,8,Te),e("div",Ge,[_(J,{src:s==null?void 0:s.image,alt:"Image",preview:""},{preview:z(j=>[e("img",{src:s==null?void 0:s.image,alt:"preview",class:"preview-image bg-white",style:le(j.style),onClick:j.onClick},null,12,Ne)]),_:2},1032,["src"])])])]))),128)),(a(!0),l(b,null,A(F((U=(N=n(i))==null?void 0:N.messages)==null?void 0:U.filter(s=>s.image).length),(s,m)=>(a(),l("div",{key:m,style:{"min-width":"7rem"},class:"flex-1 h-7rem"},je))),128))])])])],512)])],64)}}},Le=W(ze,[["__scopeId","data-v-5eabd472"]]);export{Le as default};
