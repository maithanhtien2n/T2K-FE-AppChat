import{_ as J,U as Q,X as Y,u as Z,S as ee,V as se,T as te,k as v,q as oe,c as _,d as l,f,N as z,e,g as n,C as h,P as b,R as A,L as D,W as le,o as a,w as ne,G as ae,H as ie,I as ce}from"./index-96b9adc6.js";const re="/assets/image-product-default-eb8ce0bc.svg";const x=p=>(ie("data-v-b2c0c878"),p=p(),ce(),p),ue={class:"flex flex-column gap-3 align-items-end mb-4"},me={style:{"padding-top":"4rem"},class:"relative h-full"},de={style:{"border-bottom":"1px solid #f1f1f1"},class:"absolute z-5 top-0 right-0 left-0 w-full h-4rem bg-white flex justify-content-between align-items-center px-3"},pe={class:"flex gap-3 align-items-center"},ge=x(()=>e("div",{class:"flex align-items-center gap-1"},[e("span",{class:"font-bold text-800"},"Cài đặt"),e("i",{class:"pi pi-spin pi-cog"})],-1)),_e={style:{"overflow-y":"auto"},class:"w-full h-full",ref:"scrollContainer"},fe={class:"w-full chat-container flex flex-column gap-3 align-items-center"},he={class:"flex flex-column gap-3 align-items-center text-900"},ve={class:"relative w-7rem h-7rem border-circle border-1 text-200 overflow-hidden"},be=["src"],xe=["src"],ye={class:"absolute top-0 left-0 right-0 bottom-0 bg-black-alpha-40 flex justify-content-center align-items-center"},we=x(()=>e("i",{class:"pi pi-camera text-2xl"},null,-1)),ke={style:{"font-size":"1.2rem"},class:"font-bold flex gap-2 align-items-center"},Ce={key:0,style:{"font-size":"1.3rem"}},Se={key:1,style:{"font-size":"1.3rem"}},Ie={class:"flex align-items-center gap-1"},Re={class:"flex flex-column gap-2 py-3"},Me={class:"w-full flex flex-wrap gap-2"},Te={class:"relative w-full h-full on-click border-1 text-100"},Ue=["src"],Ge={class:"absolute top-0 left-0 right-0 bottom-0 overflow-hidden opacity-0"},Ne=["src","onClick"],je=x(()=>e("img",{class:"w-full h-full object-fit-cover border-1 text-200",src:re,alt:"Lỗi ảnh"},null,-1)),ze=[je],Ae={__name:"SettingMessage",setup(p){const L=Q(),V=Y(),y=Z(),{onActionGetListRoom:B}=ee(),{onGetterGroupMessage:i,onActionGetGroupMessage:E,onActionUpdateRoom:O}=se(),u=te("id","",{transform:String}),g=v(!1),m=v(null),c=v(""),w=()=>{var o;V.name==="SettingMessage"&&E({account_id:(o=D.value)==null?void 0:o.account_id,room_id:u.value}).then(s=>{s.success||y.replace({name:"NotFound"})})},F=o=>{let s=[];for(let r=0;r<12-o;r++)s.push(r);return s},$=()=>{le(u.value),L.success("Đã sao chép id phòng")},K=o=>{const s=new FileReader;s.readAsDataURL(o.target.files[0]),s.onload=r=>{m.value={name:o.target.files[0].name,base64:r.target.result}}},q=o=>{c.value=o,g.value=!0},H=async()=>{(await O({room_id:u.value,room_name:c.value,room_image:m.value})).success&&(w().then(s=>{s.success&&(m.value=null,c.value="")}),B(D.value.account_id))};return oe(()=>{var o,s;(!((o=i.value)!=null&&o._id)||((s=i.value)==null?void 0:s._id)!==u.value)&&w()}),(o,s)=>{var k,C,S,I,R,M,T,U,G,N;const r=_("InputText"),P=_("Dialog"),W=_("Button"),X=_("Image");return a(),l(b,null,[f(P,{visible:g.value,"onUpdate:visible":s[2]||(s[2]=t=>g.value=t),modal:"",header:"Chỉnh sửa tên nhóm",class:"w-30rem"},{default:z(()=>[e("div",ue,[f(r,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),placeholder:"Nhập tên nhóm",class:"w-full",onKeypress:s[1]||(s[1]=ne(t=>g.value=!1,["enter"]))},null,8,["modelValue"])])]),_:1},8,["visible"]),e("div",me,[e("div",de,[e("div",pe,[e("i",{class:"icon-back pi pi-arrow-left on-click font-bold",onClick:s[3]||(s[3]=t=>n(y).push({name:"Message",params:{id:n(u)}}))}),ge]),f(W,{label:"Lưu",outlined:"",onClick:H,disabled:!m.value&&!c.value},null,8,["disabled"])]),e("div",_e,[e("div",fe,[e("div",he,[e("div",ve,[(k=m.value)!=null&&k.base64?(a(),l("img",{key:0,class:"w-full h-full object-fit-cover",src:((C=m.value)==null?void 0:C.base64)||"/images/icon-room.png",onerror:"this.onerror=null; this.src='/images/icon-room.png';"},null,8,be)):(a(),l("img",{key:1,class:"w-full h-full object-fit-cover",src:((S=n(i))==null?void 0:S.room_image)||"/images/icon-room.png",onerror:"this.onerror=null; this.src='/images/icon-room.png';"},null,8,xe)),e("div",ye,[e("input",{type:"file",class:"absolute top-0 left-0 right-0 bottom-0 opacity-0 on-click",accept:"image/*",onChange:K},null,32),we])]),e("span",ke,[c.value?(a(),l("span",Ce,h(c.value),1)):(a(),l("span",Se,h((I=n(i))==null?void 0:I.room_name),1)),e("i",{style:{"font-size":"0.9rem"},class:"pi pi-pencil on-click",onClick:s[4]||(s[4]=t=>{var d;return q((d=n(i))==null?void 0:d.room_name)})})]),e("div",Ie,[e("span",null,"Id phòng: "+h(n(u)),1),e("i",{class:"pi pi-copy on-click",onClick:$})]),e("span",null,"Số lượng thành viên: "+h((M=(R=n(i))==null?void 0:R.members)==null?void 0:M.length),1)]),e("div",Re,[e("div",Me,[(a(!0),l(b,null,A((U=(T=n(i))==null?void 0:T.messages)==null?void 0:U.filter(t=>t.image),(t,d)=>(a(),l("div",{key:d,style:{"min-width":"7rem"},class:"flex-1 h-7rem bg-black-alpha-10"},[e("div",Te,[e("img",{class:"w-full h-full object-fit-cover",src:t==null?void 0:t.image,onerror:"this.onerror=null; this.src='../../../public/images/icon-image-error.png';"},null,8,Ue),e("div",Ge,[f(X,{src:t==null?void 0:t.image,alt:"Image",preview:""},{preview:z(j=>[e("img",{src:t==null?void 0:t.image,alt:"preview",class:"preview-image bg-white",style:ae(j.style),onClick:j.onClick},null,12,Ne)]),_:2},1032,["src"])])])]))),128)),(a(!0),l(b,null,A(F((N=(G=n(i))==null?void 0:G.messages)==null?void 0:N.filter(t=>t.image).length),(t,d)=>(a(),l("div",{key:d,style:{"min-width":"7rem"},class:"flex-1 h-7rem bg-black-alpha-10"},ze))),128))])])])],512)])],64)}}},Le=J(Ae,[["__scopeId","data-v-b2c0c878"]]);export{Le as default};
