import{W as R,X as w,g as x,K as S,u as _,Y as k,p as D,n as M}from"./index-734d83fb.js";function O(t){return R()?(w(t),!0):!1}function c(t){return typeof t=="function"?t():x(t)}const u=new WeakMap;function b(t,p,f={}){const{mode:i="replace",route:s=S(),router:g=_(),transform:h=r=>r}=f;u.has(s)||u.set(s,new Map);const e=u.get(s);O(()=>{e.delete(t)}),e.set(t,s.params[t]);let a;const l=k((r,n)=>(a=n,{get(){r();const o=e.get(t);return h(o!==void 0?o:c(p))},set(o){e.get(t)!==o&&(e.set(t,o),n(),M(()=>{const{params:m,query:y,hash:d}=s;g[c(i)]({params:{...m,...Object.fromEntries(e.entries())},query:y,hash:d})}))}}));return D(()=>s.params[t],r=>{e.set(t,r),a()},{flush:"sync"}),l}export{b as u};
