import{T as R,U as w,h as x,I as S,u as _,V as k,l as D,n as M}from"./index-61383201.js";function O(t){return R()?(w(t),!0):!1}function c(t){return typeof t=="function"?t():x(t)}const u=new WeakMap;function V(t,p,f={}){const{mode:i="replace",route:s=S(),router:h=_(),transform:l=r=>r}=f;u.has(s)||u.set(s,new Map);const e=u.get(s);O(()=>{e.delete(t)}),e.set(t,s.params[t]);let a;const g=k((r,n)=>(a=n,{get(){r();const o=e.get(t);return l(o!==void 0?o:c(p))},set(o){e.get(t)!==o&&(e.set(t,o),n(),M(()=>{const{params:m,query:y,hash:d}=s;h[c(i)]({params:{...m,...Object.fromEntries(e.entries())},query:y,hash:d})}))}}));return D(()=>s.params[t],r=>{e.set(t,r),a()},{flush:"sync"}),g}export{V as u};
