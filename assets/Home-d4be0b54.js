import{_ as A,S as E,K as I,k as D,r as F,L as P,l as G,c as i,M as N,o as s,d as p,f as c,N as v,e,g as k,C as j,O as M,A as y,F as V,E as f,D as x,P as S,H as z,I as T,q as K,Q as O,R as Q}from"./index-94edf9c6.js";import{V as J,P as W}from"./PostContent-a530775a.js";const X="/images/image-1.webp";const b=r=>(z("data-v-8f5b0693"),r=r(),T(),r),Y={class:"flex flex-column gap-3"},Z={style:{"font-size":"0.9rem"},class:"text-700"},ee={class:"ql-formats"},te={class:"ql-bold"},oe={class:"ql-italic"},le={class:"ql-underline"},se={class:"flex justify-content-between align-items-center"},ae=b(()=>e("span",null,"Thêm vào bài viết của bạn",-1)),ne={class:"flex gap-3 align-items-center"},ie=b(()=>e("i",{class:"pi pi-image on-click"},null,-1)),ce=b(()=>e("i",{class:"pi pi-video on-click"},null,-1)),re={key:0,class:"relative w-full flex align-items-center h-10rem border-1 border-dashed text-main-color bg-black-alpha-10"},de=["src"],ue={class:"card"},pe={class:"flex align-items-center gap-2"},_e=b(()=>e("img",{style:{width:"2.5rem",height:"2.5rem"},class:"object-fit-cover border-1 text-200 border-circle",src:X,alt:"Lỗi ảnh"},null,-1)),me={__name:"UpPosts",setup(r){var C;const{onGetterListRoom:_}=E(),{onActionCreatePosts:g,onActionGetAllPosts:n}=I(),d=D(!1),u=D(!1),t=F({account_id:(C=P.value)==null?void 0:C.account_id,content:"",roomId:"",file:null}),U=G(()=>_.value.map(l=>({name:l==null?void 0:l.room_name,code:l==null?void 0:l._id}))),w=l=>{u.value=!0;const o=new FileReader;o.readAsDataURL(l.target.files[0]),o.onload=m=>{t.file={name:l.target.files[0].name,base64:m.target.result,type:m.target.result.split("/")[0].split(":")[1]},u.value=!1}},B=async()=>{(await g(t)).success&&(d.value=!1,n(),t.content="",t.roomId="",t.file=null)};return(l,o)=>{const m=i("Avatar"),L=i("Editor"),q=i("Dropdown"),H=i("Skeleton"),R=i("Button"),$=i("Dialog"),h=N("tooltip");return s(),p(S,null,[c($,{visible:d.value,"onUpdate:visible":o[3]||(o[3]=a=>d.value=a),modal:"",header:"Tạo bài viết",class:"w-30rem"},{footer:v(()=>[c(R,{label:"Đăng bài",class:"w-full mt-2",disabled:!t.content,onClick:B},null,8,["disabled"])]),default:v(()=>[e("div",Y,[c(m,{value:{image:"/images/image-1.webp",name:k(P).user_name}},{default:v(()=>[e("span",Z,j(k(M)(new Date)),1)]),_:1},8,["value"]),c(L,{modelValue:t.content,"onUpdate:modelValue":o[0]||(o[0]=a=>t.content=a),editorStyle:"height: 70px"},{toolbar:v(()=>[e("span",ee,[y(e("button",te,null,512),[[h,"Bold",void 0,{bottom:!0}]]),y(e("button",oe,null,512),[[h,"Italic",void 0,{bottom:!0}]]),y(e("button",le,null,512),[[h,"Underline",void 0,{bottom:!0}]])])]),_:1},8,["modelValue"]),c(q,{modelValue:t.roomId,"onUpdate:modelValue":o[1]||(o[1]=a=>t.roomId=a),options:U.value,optionLabel:"name",optionValue:"code",placeholder:"Mời vào phòng"},null,8,["modelValue","options"]),e("div",se,[ae,e("div",ne,[e("div",{class:V(["relative",{"p-disabled":t.file}])},[ie,e("input",{type:"file",class:"absolute top-0 left-0 right-0 bottom-0 opacity-0 on-click",accept:"image/*",onChange:w},null,32)],2),e("div",{class:V(["relative",{"p-disabled":t.file}])},[ce,e("input",{type:"file",class:"absolute top-0 left-0 right-0 bottom-0 opacity-0 on-click",accept:"video/mp4",onChange:w},null,32)],2)])]),t.file?(s(),p("div",re,[e("i",{class:"pi pi-times absolute right-0 top-0 on-click",onClick:o[2]||(o[2]=a=>t.file=null)}),t.file.type==="image"?(s(),p("img",{key:0,style:{"object-fit":"contain"},class:"w-full h-9rem",src:t.file.base64,alt:""},null,8,de)):f("",!0),t.file.type==="video"?(s(),x(J,{key:1,value:t.file.base64,height:"9rem",class:"mt-1"},null,8,["value"])):f("",!0)])):f("",!0),u.value?(s(),x(H,{key:1,height:"8rem"})):f("",!0)])]),_:1},8,["visible"]),e("div",ue,[e("div",pe,[_e,e("div",{style:{"background-color":"#f0f2f5",height:"2.5rem"},class:"item-upload w-full border-round-3xl flex align-items-center text-700 px-3 on-click",onClick:o[4]||(o[4]=a=>d.value=!0)}," Đăng tải bài viết của bạn lên? ")])])],64)}}},ve=A(me,[["__scopeId","data-v-8f5b0693"]]);const fe={style:{"overflow-y":"auto"},class:"w-full h-full"},be={class:"chat-container flex flex-column gap-3 px-8"},ge={__name:"Home",setup(r){const{onGetterAllPosts:_,onActionGetAllPosts:g}=I();return K(()=>{O.on("like-posts",n=>{_.value=n==null?void 0:n.allPosts}),g()}),(n,d)=>(s(),p("div",fe,[e("div",be,[c(ve),(s(!0),p(S,null,Q(k(_),(u,t)=>(s(),x(W,{key:t,value:u},null,8,["value"]))),128))])]))}},ke=A(ge,[["__scopeId","data-v-a2507611"]]);export{ke as default};
